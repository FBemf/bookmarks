{{ template "base" . }}

{{ define "head" }}
<title>Edit {{ .Bookmark.Name }}</title>
<script src="https://unpkg.com/stimulus/dist/stimulus.umd.js"></script>
<script src="/static/controllers.js"></script>
{{ end }}

{{ define "body" }}
<h1>Editing {{ .Bookmark.Name }}</h1>

<turbo-frame id="entry-{{ .Bookmark.Id }}">
    <div class=bookmark-entry>
        <div data-controller="bookmark-tagger">
            <form method=POST action="/bookmarks/edit/{{ .Bookmark.Id }}{{ .UrlParams | paramQueryString }}">
                <input type=text name=name placeholder="Name" value="{{ .Bookmark.Name }}" autocomplete=off>
                <input type=text name=url placeholder="https://www.example.com" value="{{ .Bookmark.Url }}"
                    autocomplete=off>
                <input type=text name=description placeholder="Description" value="{{ .Bookmark.Description }}"
                    autocomplete=off>
                <input type=submit value="Update">
                <a href="/bookmarks/view/{{ .Bookmark.Id }}{{ .UrlParams | paramQueryString }}">Cancel</a>
                <ul data-bookmark-tagger-target="tagList">
                    {{ range .Bookmark.Tags }}
                    <li data-controller="tag" data-tag-target="self">
                        <input type=text name=tag readonly=readonly value="{{ . }}">
                        <button data-action="click->tag#remove" type=button>Remove</button>
                    </li>
                    {{ end }}
                </ul>
            </form>
            <input data-bookmark-tagger-target="tagName" data-action="keydown->bookmark-tagger#addTag" type=text
                placeholder="Tag name" value="" autocomplete=off>
            <button type=button data-action="click->bookmark-tagger#addTag">Add tag</button>
        </div>
        <div data-controller="bookmark-deleter">
            <button data-bookmark-deleter-target="deletePrimary"
                data-action="click->bookmark-deleter#delete">Delete</button>
            <form data-bookmark-deleter-target="deleteYN" method=POST
                action="/bookmarks/delete/{{ .Bookmark.Id }}{{ .UrlParams | paramQueryString }}" data-turbo-frame="list"
                style="display: none">
                Are you sure?&nbsp;
                <button>Delete</button></a>&nbsp;
                <button type=button data-action="click->bookmark-deleter#deleteCancel">Cancel</button>
            </form>
        </div>
    </div>
</turbo-frame>
{{ end }}